(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(15),o=n.n(r),i=(n(21),n(16)),u=n(3),l=(n(22),n(0)),a=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"filter by: "}),Object(l.jsx)("input",{value:e.startValue,onChange:e.handleChange})]})},s=function(e){return Object(l.jsx)("button",{onClick:e.deleteClick,children:e.text})},d=function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e.personID.name}),Object(l.jsx)("td",{children:e.personID.number}),Object(l.jsx)("td",{children:Object(l.jsx)(s,{deleteNumber:e.personID.id,text:"delete",deleteClick:function(){return e.deleteClick(e.personID.id)}})})]})},j=function(e){var t=e.persons.filter((function(t){return t.name.toUpperCase().includes(e.filter.toUpperCase())}));return Object(l.jsx)("table",{children:Object(l.jsx)("tbody",{children:t.map((function(t){return Object(l.jsx)(d,{personID:t,filter:e.filter,deleteClick:e.deleteClick},t.name)}))})})},b=n(4),f=n.n(b),h="/api/persons",O={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},create:function(e){return f.a.post(h,e).then((function(e){return e.data}))},deletePerson:function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},overwriteNumber:function(e,t){return f.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}},x=function(e){var t=e.userMessage,n=t[1]?"red":"green",c={borderColor:n,borderStyle:"solid",borderRadius:5,padding:10,color:n,margin:10,fontSize:18,background:"lightgrey"};return null!==t[0]?Object(l.jsx)("div",{style:c,children:t}):Object(l.jsx)("div",{})};var m=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),d=s[0],b=s[1],f=Object(c.useState)(""),h=Object(u.a)(f,2),m=h[0],v=h[1],p=Object(c.useState)(""),g=Object(u.a)(p,2),C=g[0],w=g[1],k=Object(c.useState)([null,null]),y=Object(u.a)(k,2),D=y[0],S=y[1];Object(c.useEffect)((function(){O.getAll().then((function(e){r(e)}))}),[]);var I=function(e){var t={name:d,number:m};O.overwriteNumber(e,t).then((function(t){console.log(t),r(n.map((function(n){return n.id===e?t:n}))),v(""),b(""),S(["Updated ".concat(t.name),!1]),setTimeout((function(){S(null,null)}),3e3)}))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Phonebook"}),Object(l.jsx)(x,{userMessage:D}),Object(l.jsx)(a,{startValue:C,handleChange:function(e){var t=e.target.value;w(t=t)}})]}),Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"add a new..."})}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t,c=!1,o=0,u=Object(i.a)(n);try{for(u.s();!(t=u.n()).done;){var l=t.value;l.name===d&&(c=!0,o=l.id,console.log("true"))}}catch(s){u.e(s)}finally{u.f()}if(c)window.confirm("Do you want to overwrite the number for ".concat(d,"?"))&&I(o);else{var a={name:d,number:m};O.create(a).then((function(e){r(n.concat(e)),S(["Added ".concat(a.name),!1]),setTimeout((function(){S([null,null])}),3e3),v(""),b("")})).catch((function(e){S(["Could not add person",!0]),console.log("error was ",e)}))}},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"name: "}),Object(l.jsx)("input",{value:d,onChange:function(e){b(e.target.value)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"number: "}),Object(l.jsx)("input",{value:m,onChange:function(e){v(e.target.value),console.log("new number",m)}})]}),Object(l.jsx)("button",{children:"save"})]}),Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Numbers"})}),Object(l.jsx)("div",{children:Object(l.jsx)(j,{persons:n,filter:C,deleteClick:function(e){var t=n.find((function(t){return t.id===e})).name;console.log("id number ",e," needs to be deleted"),window.confirm("Are you sure you want to delete the entry?")&&(O.deletePerson(e).then((function(e){S(["Deleted ".concat(t),!1]),setTimeout((function(){S([null,null])}),3e3)})).catch((function(e){S(["".concat(t," not in database"),!0]),setTimeout((function(){S([null,null],3e3)}))})),r(n.filter((function(t){return t.id!==e}))))}})})]})};o.a.render(Object(l.jsx)(m,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.98c3ed7e.chunk.js.map